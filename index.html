<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plataforma de Ejercicios - Derecho para No Abogados</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .student-info {
            background: #f8f9fa;
            padding: 30px;
            border-bottom: 3px solid #e9ecef;
        }

        .student-info h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #495057;
            font-weight: 600;
            font-size: 1.1em;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .section {
            padding: 30px;
            border-bottom: 2px solid #e9ecef;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-description {
            color: #6c757d;
            margin-bottom: 25px;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .exercise {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .exercise:hover {
            border-color: #3498db;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.1);
        }

        .exercise h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .exercise-number {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            margin-right: 10px;
            font-weight: bold;
        }

        .options {
            margin-top: 15px;
        }

        .option {
            display: block;
            padding: 12px;
            margin-bottom: 10px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .option:hover {
            background: #e3f2fd;
            border-color: #3498db;
            transform: translateX(5px);
        }

        .option input[type="radio"],
        .option input[type="checkbox"] {
            margin-right: 12px;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .matching-exercise {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .matching-column {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }

        .matching-column h4 {
            color: #495057;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2em;
        }

        .matching-item {
            padding: 10px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 2px solid #dee2e6;
            cursor: move;
            transition: all 0.3s;
        }

        .matching-item:hover {
            background: #e3f2fd;
            border-color: #3498db;
            transform: scale(1.02);
        }

        .matching-item.dragging {
            opacity: 0.5;
        }

        .drop-zone {
            min-height: 50px;
            padding: 10px;
            border: 2px dashed #dee2e6;
            border-radius: 6px;
            margin-bottom: 10px;
            background: white;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            background: #e3f2fd;
            border-color: #3498db;
        }

        .drop-zone.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .drop-zone.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-check {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            margin-right: 10px;
        }

        .btn-reset {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
        }

        .btn-submit {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            display: block;
            margin: 30px auto;
            padding: 15px 50px;
            font-size: 1.3em;
        }

        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result.success {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }

        .result.error {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }

        .result.warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
        }

        .score-display {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            margin: 20px 0;
            display: none;
        }

        .score-display h3 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 15px;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            }
            50% {
                box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            }
            100% {
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            }
        }

        .score-circle.excellent {
            color: #28a745;
            border: 5px solid #28a745;
        }

        .score-circle.good {
            color: #3498db;
            border: 5px solid #3498db;
        }

        .score-circle.regular {
            color: #ffc107;
            border: 5px solid #ffc107;
        }

        .score-circle.needs-improvement {
            color: #dc3545;
            border: 5px solid #dc3545;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            background: #e3f2fd;
            border-left: 5px solid #3498db;
            border-radius: 5px;
        }

        .feedback h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .likert-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .likert-option {
            text-align: center;
            cursor: pointer;
            padding: 10px;
            transition: all 0.3s;
        }

        .likert-option:hover {
            transform: scale(1.1);
        }

        .likert-option input[type="radio"] {
            display: none;
        }

        .likert-option label {
            display: block;
            padding: 10px 15px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .likert-option input[type="radio"]:checked + label {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            border-radius: 15px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
            z-index: 1000;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            position: relative;
            background: white;
            margin: 50px auto;
            padding: 40px;
            width: 90%;
            max-width: 600px;
            border-radius: 20px;
            animation: slideDown 0.5s;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 30px;
            cursor: pointer;
            color: #999;
            transition: color 0.3s;
        }

        .close-modal:hover {
            color: #333;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .matching-exercise {
                grid-template-columns: 1fr;
            }
            
            .timer {
                position: static;
                margin: 20px auto;
                text-align: center;
            }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="timer" id="timer">
        <span id="timerDisplay">00:00</span>
    </div>

    <div class="container">
        <div class="header">
            <h1>üìö Derecho para No Abogados</h1>
            <p>Plataforma de Ejercicios y Evaluaci√≥n</p>
        </div>

        <div class="student-info">
            <h2>üìù Informaci√≥n del Alumno</h2>
            <div class="form-group">
                <label for="studentName">Nombre Completo:</label>
                <input type="text" id="studentName" placeholder="Ingresa tu nombre completo" required>
            </div>
            <div class="form-group">
                <label for="studentEmail">Correo Electr√≥nico:</label>
                <input type="email" id="studentEmail" placeholder="tu.correo@ejemplo.com" required>
            </div>
        </div>

        <!-- SECCI√ìN 1: FUNDAMENTOS DEL DERECHO -->
        <div class="section">
            <h2>üìñ Secci√≥n 1: Fundamentos del Derecho</h2>
            <p class="section-description">
                Eval√∫a tu comprensi√≥n sobre los conceptos b√°sicos del sistema jur√≠dico mexicano y la jerarqu√≠a de leyes.
            </p>

            <div class="exercise">
                <h3><span class="exercise-number">1</span>¬øCu√°l es la funci√≥n principal del derecho en la sociedad?</h3>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q1" value="a">
                        a) Castigar a los criminales √∫nicamente
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="b">
                        b) Regular la convivencia social y resolver conflictos pac√≠ficamente
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="c">
                        c) Beneficiar solo a los abogados y jueces
                    </label>
                    <label class="option">
                        <input type="radio" name="q1" value="d">
                        d) Complicar la vida de los ciudadanos
                    </label>
                </div>
                <div class="result" id="result1"></div>
            </div>

            <div class="exercise">
                <h3><span class="exercise-number">2</span>En la jerarqu√≠a de leyes mexicanas, ¬øcu√°l es el orden correcto de mayor a menor jerarqu√≠a?</h3>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q2" value="a">
                        a) Reglamentos municipales ‚Üí Leyes estatales ‚Üí Constituci√≥n
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="b">
                        b) Constituci√≥n ‚Üí Tratados Internacionales ‚Üí Leyes Federales ‚Üí Leyes Estatales
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="c">
                        c) Leyes Federales ‚Üí Constituci√≥n ‚Üí Reglamentos
                    </label>
                    <label class="option">
                        <input type="radio" name="q2" value="d">
                        d) Todas las leyes tienen la misma jerarqu√≠a
                    </label>
                </div>
                <div class="result" id="result2"></div>
            </div>

            <div class="exercise">
                <h3><span class="exercise-number">3</span>¬øCu√°les de las siguientes situaciones NO requieren necesariamente un abogado? (Selecciona todas las correctas)</h3>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q3" value="a">
                        a) Presentar una queja en PROFECO
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q3" value="b">
                        b) Enfrentar un proceso penal como acusado
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q3" value="c">
                        c) Pagar una multa de tr√°nsito simple
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q3" value="d">
                        d) Comprar un inmueble
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q3" value="e">
                        e) Reclamar una garant√≠a directamente con el proveedor
                    </label>
                </div>
                <div class="result" id="result3"></div>
            </div>
        </div>

        <!-- SECCI√ìN 2: CONTRATOS Y DOCUMENTOS -->
        <div class="section">
            <h2>üìÑ Secci√≥n 2: Contratos y Documentos Legales</h2>
            <p class="section-description">
                Demuestra tu capacidad para identificar elementos esenciales y cl√°usulas problem√°ticas en contratos.
            </p>

            <div class="exercise">
                <h3><span class="exercise-number">4</span>Relaciona cada parte del contrato con su descripci√≥n:</h3>
                <div class="matching-exercise">
                    <div class="matching-column">
                        <h4>Partes del Contrato</h4>
                        <div class="matching-item" draggable="true" data-answer="objeto">Objeto</div>
                        <div class="matching-item" draggable="true" data-answer="precio">Precio/Contraprestaci√≥n</div>
                        <div class="matching-item" draggable="true" data-answer="plazo">Plazo</div>
                        <div class="matching-item" draggable="true" data-answer="incumplimiento">Cl√°usula de Incumplimiento</div>
                    </div>
                    <div class="matching-column">
                        <h4>Descripciones</h4>
                        <div class="drop-zone" data-correct="objeto">Define qu√© se est√° acordando exactamente</div>
                        <div class="drop-zone" data-correct="precio">Establece qu√© da cada parte a cambio</div>
                        <div class="drop-zone" data-correct="plazo">Determina cu√°nto dura el acuerdo</div>
                        <div class="drop-zone" data-correct="incumplimiento">Especifica qu√© pasa si alguien no cumple</div>
                    </div>
                </div>
                <div class="result" id="result4"></div>
            </div>

            <div class="exercise">
                <h3><span class="exercise-number">5</span>¬øCu√°les de las siguientes son cl√°usulas abusivas o ilegales en un contrato de arrendamiento?</h3>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q5" value="a">
                        a) "El arrendatario renuncia a cualquier reclamaci√≥n futura contra el arrendador"
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q5" value="b">
                        b) "La renta se incrementar√° 5% anual"
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q5" value="c">
                        c) "El arrendador puede entrar al inmueble cuando guste sin avisar"
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q5" value="d">
                        d) "Se requiere un dep√≥sito equivalente a un mes de renta"
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q5" value="e">
                        e) "En caso de desocupar antes del plazo, pierde el dep√≥sito m√°s 3 meses de renta"
                    </label>
                </div>
                <div class="result" id="result5"></div>
            </div>
        </div>

        <!-- SECCI√ìN 3: DERECHOS LABORALES -->
        <div class="section">
            <h2>üíº Secci√≥n 3: Derechos Laborales</h2>
            <p class="section-description">
                Eval√∫a tu conocimiento sobre derechos laborales b√°sicos y c√°lculo de finiquitos.
            </p>

            <div class="exercise">
                <h3><span class="exercise-number">6</span>Caso Pr√°ctico: Juan trabaj√≥ 2 a√±os con un salario de $8,000 mensuales y fue despedido sin causa justificada. ¬øCu√°l es el monto aproximado de su indemnizaci√≥n constitucional (3 meses de salario)?</h3>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q6" value="a">
                        a) $8,000
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="b">
                        b) $16,000
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="c">
                        c) $24,000
                    </label>
                    <label class="option">
                        <input type="radio" name="q6" value="d">
                        d) $32,000
                    </label>
                </div>
                <div class="result" id="result6"></div>
            </div>

            <div class="exercise">
                <h3><span class="exercise-number">7</span>¬øCu√°nto tiempo tiene un trabajador para demandar por despido injustificado?</h3>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q7" value="a">
                        a) 30 d√≠as
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="b">
                        b) 6 meses
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="c">
                        c) 1 a√±o
                    </label>
                    <label class="option">
                        <input type="radio" name="q7" value="d">
                        d) 2 a√±os
                    </label>
                </div>
                <div class="result" id="result7"></div>
            </div>
        </div>

        <!-- SECCI√ìN 4: INSTITUCIONES DE APOYO -->
        <div class="section">
            <h2>üèõÔ∏è Secci√≥n 4: Instituciones de Apoyo al Ciudadano</h2>
            <p class="section-description">
                Identifica a qu√© instituci√≥n acudir seg√∫n el tipo de problema legal.
            </p>

            <div class="exercise">
                <h3><span class="exercise-number">8</span>Relaciona cada problema con la instituci√≥n correspondiente:</h3>
                <div class="matching-exercise">
                    <div class="matching-column">
                        <h4>Problemas</h4>
                        <div class="matching-item" draggable="true" data-answer="profeco">Producto defectuoso sin garant√≠a v√°lida</div>
                        <div class="matching-item" draggable="true" data-answer="condusef">Cargo no reconocido en tarjeta de cr√©dito</div>
                        <div class="matching-item" draggable="true" data-answer="mp">V√≠ctima de robo</div>
                        <div class="matching-item" draggable="true" data-answer="conapred">Discriminaci√≥n laboral por embarazo</div>
                    </div>
                    <div class="matching-column">
                        <h4>Instituciones</h4>
                        <div class="drop-zone" data-correct="profeco">PROFECO</div>
                        <div class="drop-zone" data-correct="condusef">CONDUSEF</div>
                        <div class="drop-zone" data-correct="mp">Ministerio P√∫blico</div>
                        <div class="drop-zone" data-correct="conapred">CONAPRED</div>
                    </div>
                </div>
                <div class="result" id="result8"></div>
            </div>
        </div>

        <!-- SECCI√ìN 5: PREVENCI√ìN DE FRAUDES -->
        <div class="section">
            <h2>üõ°Ô∏è Secci√≥n 5: Prevenci√≥n de Fraudes</h2>
            <p class="section-description">
                Demuestra tu capacidad para identificar se√±ales de alerta en situaciones potencialmente fraudulentas.
            </p>

            <div class="exercise">
                <h3><span class="exercise-number">9</span>¬øCu√°les son se√±ales de alerta de un posible fraude? (Selecciona todas las correctas)</h3>
                <div class="options">
                    <label class="option">
                        <input type="checkbox" name="q9" value="a">
                        a) Te presionan para tomar una decisi√≥n inmediata
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q9" value="b">
                        b) Piden todos los documentos por escrito
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q9" value="c">
                        c) Prometen ganancias garantizadas sin riesgo
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q9" value="d">
                        d) Tienen oficinas f√≠sicas verificables
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q9" value="e">
                        e) Piden dinero por adelantado para "tr√°mites"
                    </label>
                    <label class="option">
                        <input type="checkbox" name="q9" value="f">
                        f) Evitan darte recibos o contratos
                    </label>
                </div>
                <div class="result" id="result9"></div>
            </div>

            <div class="exercise">
                <h3><span class="exercise-number">10</span>Si recibes una llamada diciendo que secuestraron a un familiar, ¬øcu√°l es la acci√≥n correcta?</h3>
                <div class="options">
                    <label class="option">
                        <input type="radio" name="q10" value="a">
                        a) Depositar inmediatamente el dinero que piden
                    </label>
                    <label class="option">
                        <input type="radio" name="q10" value="b">
                        b) Colgar y llamar directamente a tu familiar para verificar
                    </label>
                    <label class="option">
                        <input type="radio" name="q10" value="c">
                        c) Dar toda la informaci√≥n que soliciten
                    </label>
                    <label class="option">
                        <input type="radio" name="q10" value="d">
                        d) Negociar el monto del rescate
                    </label>
                </div>
                <div class="result" id="result10"></div>
            </div>
        </div>

        <!-- CALIFICACI√ìN GENERAL -->
        <div class="score-display" id="scoreDisplay">
            <h3>Tu Calificaci√≥n Final</h3>
            <div class="score-circle" id="scoreCircle">
                <span id="finalScore">0%</span>
            </div>
            <div class="feedback" id="scoreFeedback"></div>
        </div>

        <!-- AUTOEVALUACI√ìN DEL ALUMNO -->
        <div class="section">
            <h2>üéØ Autoevaluaci√≥n del Aprendizaje</h2>
            <p class="section-description">
                Reflexiona sobre tu aprendizaje y los conocimientos adquiridos en el curso.
            </p>

            <div class="form-group">
                <label>¬øQu√© tan preparado(a) te sientes ahora para identificar situaciones que requieren atenci√≥n legal?</label>
                <div class="likert-scale">
                    <div class="likert-option">
                        <input type="radio" name="self1" value="1" id="self1-1">
                        <label for="self1-1">Nada<br>preparado</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="self1" value="2" id="self1-2">
                        <label for="self1-2">Poco<br>preparado</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="self1" value="3" id="self1-3">
                        <label for="self1-3">Moderadamente<br>preparado</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="self1" value="4" id="self1-4">
                        <label for="self1-4">Bien<br>preparado</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="self1" value="5" id="self1-5">
                        <label for="self1-5">Muy bien<br>preparado</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>¬øQu√© tan √∫til consideras que ser√° este conocimiento en tu vida diaria?</label>
                <div class="likert-scale">
                    <div class="likert-option">
                        <input type="radio" name="self2" value="1" id="self2-1">
                        <label for="self2-1">Nada<br>√∫til</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="self2" value="2" id="self2-2">
                        <label for="self2-2">Poco<br>√∫til</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="self2" value="3" id="self2-3">
                        <label for="self2-3">Moderadamente<br>√∫til</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="self2" value="4" id="self2-4">
                        <label for="self2-4">Muy<br>√∫til</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="self2" value="5" id="self2-5">
                        <label for="self2-5">Extremadamente<br>√∫til</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>¬øCu√°l fue el tema m√°s valioso que aprendiste?</label>
                <select id="mostValuable">
                    <option value="">Selecciona una opci√≥n...</option>
                    <option value="fundamentos">Fundamentos del Derecho y Sistema Jur√≠dico</option>
                    <option value="contratos">C√≥mo leer y entender contratos</option>
                    <option value="laborales">Derechos laborales y c√°lculo de finiquitos</option>
                    <option value="instituciones">Instituciones de apoyo al ciudadano</option>
                    <option value="fraudes">Prevenci√≥n de fraudes y estafas</option>
                    <option value="documentos">Documentos legales esenciales</option>
                    <option value="cuando-abogado">Cu√°ndo necesito un abogado</option>
                </select>
            </div>

            <div class="form-group">
                <label>¬øQu√© acci√≥n concreta tomar√°s despu√©s de este curso?</label>
                <textarea id="concreteAction" rows="3" placeholder="Ejemplo: Revisar√© mi contrato de trabajo, har√© mi testamento, organizar√© mis documentos importantes..."></textarea>
            </div>

            <div class="form-group">
                <label>¬øSobre qu√© tema te gustar√≠a profundizar m√°s?</label>
                <textarea id="deepenTopic" rows="3" placeholder="Menciona los temas que requieres mayor informaci√≥n o pr√°ctica..."></textarea>
            </div>
        </div>

        <!-- EVALUACI√ìN DEL CURSO Y DOCENTE -->
        <div class="section">
            <h2>üìä Evaluaci√≥n del Curso y Docente</h2>
            <p class="section-description">
                Tu opini√≥n es muy importante para mejorar futuras ediciones del curso.
            </p>

            <div class="form-group">
                <label>Calidad del contenido del curso:</label>
                <div class="likert-scale">
                    <div class="likert-option">
                        <input type="radio" name="course1" value="1" id="course1-1">
                        <label for="course1-1">Muy<br>deficiente</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="course1" value="2" id="course1-2">
                        <label for="course1-2">Deficiente</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="course1" value="3" id="course1-3">
                        <label for="course1-3">Regular</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="course1" value="4" id="course1-4">
                        <label for="course1-4">Bueno</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="course1" value="5" id="course1-5">
                        <label for="course1-5">Excelente</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Claridad en las explicaciones del Mtro. Jorge Israel Clemente:</label>
                <div class="likert-scale">
                    <div class="likert-option">
                        <input type="radio" name="teacher1" value="1" id="teacher1-1">
                        <label for="teacher1-1">Muy<br>confuso</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="teacher1" value="2" id="teacher1-2">
                        <label for="teacher1-2">Confuso</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="teacher1" value="3" id="teacher1-3">
                        <label for="teacher1-3">Regular</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="teacher1" value="4" id="teacher1-4">
                        <label for="teacher1-4">Claro</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="teacher1" value="5" id="teacher1-5">
                        <label for="teacher1-5">Muy<br>claro</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Dominio del tema por parte del docente:</label>
                <div class="likert-scale">
                    <div class="likert-option">
                        <input type="radio" name="teacher2" value="1" id="teacher2-1">
                        <label for="teacher2-1">Muy<br>deficiente</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="teacher2" value="2" id="teacher2-2">
                        <label for="teacher2-2">Deficiente</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="teacher2" value="3" id="teacher2-3">
                        <label for="teacher2-3">Regular</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="teacher2" value="4" id="teacher2-4">
                        <label for="teacher2-4">Bueno</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="teacher2" value="5" id="teacher2-5">
                        <label for="teacher2-5">Excelente</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Utilidad de los ejercicios y casos pr√°cticos:</label>
                <div class="likert-scale">
                    <div class="likert-option">
                        <input type="radio" name="course2" value="1" id="course2-1">
                        <label for="course2-1">Nada<br>√∫tiles</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="course2" value="2" id="course2-2">
                        <label for="course2-2">Poco<br>√∫tiles</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="course2" value="3" id="course2-3">
                        <label for="course2-3">Regular</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="course2" value="4" id="course2-4">
                        <label for="course2-4">√ötiles</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="course2" value="5" id="course2-5">
                        <label for="course2-5">Muy<br>√∫tiles</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>¬øRecomendar√≠as este curso a otras personas?</label>
                <div class="likert-scale">
                    <div class="likert-option">
                        <input type="radio" name="recommend" value="1" id="recommend-1">
                        <label for="recommend-1">Definitivamente<br>no</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="recommend" value="2" id="recommend-2">
                        <label for="recommend-2">Probablemente<br>no</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="recommend" value="3" id="recommend-3">
                        <label for="recommend-3">Tal vez</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="recommend" value="4" id="recommend-4">
                        <label for="recommend-4">Probablemente<br>s√≠</label>
                    </div>
                    <div class="likert-option">
                        <input type="radio" name="recommend" value="5" id="recommend-5">
                        <label for="recommend-5">Definitivamente<br>s√≠</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>¬øQu√© mejorar√≠as del curso?</label>
                <textarea id="improvements" rows="3" placeholder="Tus sugerencias son muy valiosas para mejorar..."></textarea>
            </div>

            <div class="form-group">
                <label>Comentarios adicionales para el Mtro. Jorge Israel Clemente:</label>
                <textarea id="additionalComments" rows="3" placeholder="Cualquier comentario adicional que quieras compartir..."></textarea>
            </div>
        </div>

        <button class="btn btn-submit" onclick="submitForm()">
            üìß ENVIAR RESULTADOS Y EVALUACI√ìN
        </button>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Enviando resultados...</p>
        </div>
    </div>

    <!-- Modal de confirmaci√≥n -->
    <div class="modal" id="confirmModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <h2>‚úÖ Resultados Enviados</h2>
            <p>Tus resultados y evaluaci√≥n han sido enviados exitosamente al Mtro. Jorge Israel Clemente Mari√©.</p>
            <p>Recibir√°s una copia en tu correo electr√≥nico.</p>
            <button class="btn" onclick="closeModal()">Cerrar</button>
        </div>
    </div>

    <script>
        // Variables globales
        let startTime = Date.now();
        let answers = {};
        let score = 0;
        let totalQuestions = 10;

        // Timer
        setInterval(() => {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }, 1000);

        // Respuestas correctas
        const correctAnswers = {
            q1: 'b',
            q2: 'b',
            q3: ['a', 'c', 'e'],
            q4: 'matching',
            q5: ['a', 'c', 'e'],
            q6: 'c',
            q7: 'c',
            q8: 'matching',
            q9: ['a', 'c', 'e', 'f'],
            q10: 'b'
        };

        // Auto-calificaci√≥n para preguntas de opci√≥n m√∫ltiple
        document.querySelectorAll('input[type="radio"]').forEach(input => {
            input.addEventListener('change', function() {
                const questionName = this.name;
                const exerciseDiv = this.closest('.exercise');
                const resultDiv = exerciseDiv.querySelector('.result');
                const options = exerciseDiv.querySelectorAll('.option');
                
                // Limpiar clases anteriores
                options.forEach(opt => {
                    opt.classList.remove('correct', 'incorrect');
                });

                if (this.value === correctAnswers[questionName]) {
                    this.parentElement.classList.add('correct');
                    resultDiv.className = 'result success';
                    resultDiv.textContent = '‚úÖ ¬°Correcto! Excelente respuesta.';
                    resultDiv.style.display = 'block';
                    answers[questionName] = { correct: true, value: this.value };
                } else {
                    this.parentElement.classList.add('incorrect');
                    resultDiv.className = 'result error';
                    resultDiv.textContent = '‚ùå Incorrecto. Revisa el material del curso sobre este tema.';
                    resultDiv.style.display = 'block';
                    answers[questionName] = { correct: false, value: this.value };
                }
            });
        });

        // Auto-calificaci√≥n para checkboxes
        ['q3', 'q5', 'q9'].forEach(questionName => {
            const checkboxes = document.querySelectorAll(`input[name="${questionName}"]`);
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    checkMultipleChoice(questionName);
                });
            });
        });

        function checkMultipleChoice(questionName) {
            const selected = [];
            const checkboxes = document.querySelectorAll(`input[name="${questionName}"]:checked`);
            const exerciseDiv = checkboxes[0]?.closest('.exercise');
            if (!exerciseDiv) return;
            
            const resultDiv = exerciseDiv.querySelector('.result');
            const options = exerciseDiv.querySelectorAll('.option');
            
            checkboxes.forEach(cb => selected.push(cb.value));
            
            // Limpiar clases anteriores
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });

            const correct = correctAnswers[questionName];
            const isCorrect = correct.length === selected.length && 
                             correct.every(val => selected.includes(val));

            if (isCorrect) {
                checkboxes.forEach(cb => cb.parentElement.classList.add('correct'));
                resultDiv.className = 'result success';
                resultDiv.textContent = '‚úÖ ¬°Perfecto! Has seleccionado todas las opciones correctas.';
                answers[questionName] = { correct: true, value: selected };
            } else {
                resultDiv.className = 'result warning';
                resultDiv.textContent = `‚ö†Ô∏è Revisa tu respuesta. Debes seleccionar ${correct.length} opciones.`;
                answers[questionName] = { correct: false, value: selected };
            }
            resultDiv.style.display = 'block';
        }

        // Drag and Drop functionality
        let draggedElement = null;

        document.querySelectorAll('.matching-item').forEach(item => {
            item.addEventListener('dragstart', function(e) {
                draggedElement = this;
                this.classList.add('dragging');
            });

            item.addEventListener('dragend', function(e) {
                this.classList.remove('dragging');
            });
        });

        document.querySelectorAll('.drop-zone').forEach(zone => {
            zone.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            });

            zone.addEventListener('dragleave', function(e) {
                this.classList.remove('drag-over');
            });

            zone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                
                if (draggedElement) {
                    // Verificar si ya hay un elemento
                    const existingItem = this.querySelector('.matching-item');
                    if (existingItem) {
                        // Devolver el elemento existente a la columna original
                        document.querySelector('.matching-column').appendChild(existingItem);
                    }
                    
                    this.appendChild(draggedElement);
                    checkMatching(this.closest('.exercise'));
                    draggedElement = null;
                }
            });
        });

        function checkMatching(exerciseDiv) {
            const dropZones = exerciseDiv.querySelectorAll('.drop-zone');
            const resultDiv = exerciseDiv.querySelector('.result');
            let allCorrect = true;
            let allFilled = true;

            dropZones.forEach(zone => {
                const item = zone.querySelector('.matching-item');
                zone.classList.remove('correct', 'incorrect');
                
                if (item) {
                    if (item.dataset.answer === zone.dataset.correct) {
                        zone.classList.add('correct');
                    } else {
                        zone.classList.add('incorrect');
                        allCorrect = false;
                    }
                } else {
                    allFilled = false;
                }
            });

            if (allFilled) {
                if (allCorrect) {
                    resultDiv.className = 'result success';
                    resultDiv.textContent = '‚úÖ ¬°Excelente! Todas las relaciones son correctas.';
                    const questionId = exerciseDiv.querySelector('h3').textContent.includes('4') ? 'q4' : 'q8';
                    answers[questionId] = { correct: true };
                } else {
                    resultDiv.className = 'result error';
                    resultDiv.textContent = '‚ùå Algunas relaciones son incorrectas. Intenta de nuevo.';
                }
                resultDiv.style.display = 'block';
            }
        }

        // Calcular puntaje final
        function calculateScore() {
            score = 0;
            for (let key in answers) {
                if (answers[key].correct) {
                    score++;
                }
            }
            return Math.round((score / totalQuestions) * 100);
        }

        // Mostrar calificaci√≥n
        function displayScore() {
            const percentage = calculateScore();
            const scoreDisplay = document.getElementById('scoreDisplay');
            const scoreCircle = document.getElementById('scoreCircle');
            const finalScore = document.getElementById('finalScore');
            const feedback = document.getElementById('scoreFeedback');
            
            scoreDisplay.style.display = 'block';
            finalScore.textContent = percentage + '%';
            
            // Clasificar el resultado
            if (percentage >= 90) {
                scoreCircle.className = 'score-circle excellent';
                feedback.innerHTML = '<h4>¬°Excelente trabajo!</h4><p>Dominas muy bien los conceptos del curso. Est√°s listo para aplicar estos conocimientos en tu vida diaria.</p>';
            } else if (percentage >= 75) {
                scoreCircle.className = 'score-circle good';
                feedback.innerHTML = '<h4>¬°Muy bien!</h4><p>Tienes un buen dominio de los conceptos. Revisa los temas donde tuviste errores para reforzar tu aprendizaje.</p>';
            } else if (percentage >= 60) {
                scoreCircle.className = 'score-circle regular';
                feedback.innerHTML = '<h4>Buen esfuerzo</h4><p>Has comprendido varios conceptos importantes. Te recomiendo repasar el material del curso para fortalecer las √°reas de oportunidad.</p>';
            } else {
                scoreCircle.className = 'score-circle needs-improvement';
                feedback.innerHTML = '<h4>Sigue practicando</h4><p>Te recomiendo revisar nuevamente el material del curso. No dudes en contactar al instructor si tienes dudas espec√≠ficas.</p>';
            }
            
            // Scroll suave hacia la calificaci√≥n
            scoreDisplay.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // Enviar formulario
        function submitForm() {
            // Validar informaci√≥n del estudiante
            const studentName = document.getElementById('studentName').value;
            const studentEmail = document.getElementById('studentEmail').value;
            
            if (!studentName || !studentEmail) {
                alert('Por favor completa tu nombre y correo electr√≥nico antes de enviar.');
                return;
            }

            // Validar que se hayan respondido todas las preguntas
            if (Object.keys(answers).length < totalQuestions) {
                alert('Por favor responde todas las preguntas antes de enviar.');
                return;
            }

            // Calcular y mostrar puntaje
            displayScore();

            // Recopilar todas las respuestas de evaluaci√≥n
            const evaluationData = {
                studentInfo: {
                    name: studentName,
                    email: studentEmail,
                    date: new Date().toLocaleString('es-MX'),
                    timeSpent: document.getElementById('timerDisplay').textContent
                },
                exerciseScore: {
                    percentage: calculateScore(),
                    correct: score,
                    total: totalQuestions,
                    details: answers
                },
                selfAssessment: {
                    preparedness: document.querySelector('input[name="self1"]:checked')?.value || 'No respondido',
                    usefulness: document.querySelector('input[name="self2"]:checked')?.value || 'No respondido',
                    mostValuable: document.getElementById('mostValuable').value || 'No especificado',
                    concreteAction: document.getElementById('concreteAction').value || 'No especificado',
                    deepenTopic: document.getElementById('deepenTopic').value || 'No especificado'
                },
                courseEvaluation: {
                    contentQuality: document.querySelector('input[name="course1"]:checked')?.value || 'No respondido',
                    teacherClarity: document.querySelector('input[name="teacher1"]:checked')?.value || 'No respondido',
                    teacherKnowledge: document.querySelector('input[name="teacher2"]:checked')?.value || 'No respondido',
                    exercisesUtility: document.querySelector('input[name="course2"]:checked')?.value || 'No respondido',
                    wouldRecommend: document.querySelector('input[name="recommend"]:checked')?.value || 'No respondido',
                    improvements: document.getElementById('improvements').value || 'Sin comentarios',
                    additionalComments: document.getElementById('additionalComments').value || 'Sin comentarios'
                }
            };

            // Mostrar loading
            document.getElementById('loading').classList.add('active');

            // Crear el cuerpo del email
            const emailBody = formatEmailBody(evaluationData);

            // Aqu√≠ configurar√≠as el env√≠o real del email
            // Por ahora simularemos el env√≠o
            setTimeout(() => {
                document.getElementById('loading').classList.remove('active');
                
                // Intentar enviar por correo usando mailto (limitado pero funcional)
                const mailtoLink = `mailto:jorge_clemente@empirica.mx?subject=Resultados del Curso - ${studentName}&body=${encodeURIComponent(emailBody)}`;
                window.open(mailtoLink);
                
                // Mostrar modal de confirmaci√≥n
                document.getElementById('confirmModal').style.display = 'block';
                
                // Tambi√©n podr√≠as guardar en localStorage para recuperar despu√©s
                localStorage.setItem('courseResults_' + Date.now(), JSON.stringify(evaluationData));
            }, 2000);
        }

        function formatEmailBody(data) {
            return `
RESULTADOS DEL CURSO: DERECHO PARA NO ABOGADOS
================================================

INFORMACI√ìN DEL ALUMNO
----------------------
Nombre: ${data.studentInfo.name}
Correo: ${data.studentInfo.email}
Fecha: ${data.studentInfo.date}
Tiempo en la plataforma: ${data.studentInfo.timeSpent}

CALIFICACI√ìN DE EJERCICIOS
--------------------------
Puntaje: ${data.exerciseScore.percentage}%
Respuestas correctas: ${data.exerciseScore.correct} de ${data.exerciseScore.total}

AUTOEVALUACI√ìN DEL APRENDIZAJE
-------------------------------
Preparaci√≥n para identificar situaciones legales: ${getScaleText(data.selfAssessment.preparedness)}
Utilidad del conocimiento: ${getScaleText(data.selfAssessment.usefulness)}
Tema m√°s valioso: ${data.selfAssessment.mostValuable}
Acci√≥n concreta a tomar: ${data.selfAssessment.concreteAction}
Temas para profundizar: ${data.selfAssessment.deepenTopic}

EVALUACI√ìN DEL CURSO Y DOCENTE
-------------------------------
Calidad del contenido: ${getScaleText(data.courseEvaluation.contentQuality)}
Claridad del docente: ${getScaleText(data.courseEvaluation.teacherClarity)}
Dominio del tema: ${getScaleText(data.courseEvaluation.teacherKnowledge)}
Utilidad de ejercicios: ${getScaleText(data.courseEvaluation.exercisesUtility)}
Recomendar√≠a el curso: ${getScaleText(data.courseEvaluation.wouldRecommend)}

Sugerencias de mejora: ${data.courseEvaluation.improvements}
Comentarios adicionales: ${data.courseEvaluation.additionalComments}

================================================
Enviado desde la Plataforma de Ejercicios - Emp√≠rica Legal Lab
            `;
        }

        function getScaleText(value) {
            const scales = {
                '1': 'Muy bajo/Deficiente',
                '2': 'Bajo/Regular',
                '3': 'Medio/Aceptable',
                '4': 'Alto/Bueno',
                '5': 'Muy alto/Excelente'
            };
            return scales[value] || 'No respondido';
        }

        function closeModal() {
            document.getElementById('confirmModal').style.display = 'none';
        }

        // Cerrar modal al hacer clic fuera
        window.onclick = function(event) {
            const modal = document.getElementById('confirmModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Prevenir env√≠o accidental del formulario
        window.addEventListener('beforeunload', function (e) {
            if (Object.keys(answers).length > 0 && !document.getElementById('confirmModal').style.display) {
                e.preventDefault();
                e.returnValue = '¬øEst√°s seguro de que quieres salir? Tus respuestas no guardadas se perder√°n.';
            }
        });
    </script>
</body>
</html>
